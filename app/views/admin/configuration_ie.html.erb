<%= title 'Gastos e Ingresos' %>

<% IeIncomeExpense.get_subclasses.each do |klass| %>

	<h3> <%= l(klass::OptionName) %> </h3>
	<% income_expenses = IeIncomeExpense.all %>
	<% if income_expenses.any? %>
		<div class="autoscroll">
			<table class="list">
				<thead>
					<tr>
						<th><%= 'Tipo de petición' %></th>
						<th><%= 'Importe' %></th>
						<th><%= 'Fecha de creación' %></th>
						<th><%= 'Fecha de facturación' %></th>
						<th><%= l(:button_sort) %></th>
					</tr>
				</thead>

				<tbody>
					<% income_expenses.each do |income_expense| %>
					<tr class="<%= cycle('odd', 'even') %>">
						<td class='name'><%= Tracker.find(income_expense.tracker_id).name %></td>
						<td><%= CustomField.find(income_expense.amount_field_id).name %></td>
						<td><%= !/\A\d+\z/.match(income_expense.start_date_field) ? l(('field_'+ income_expense.start_date_field).to_sym) : CustomField.find(income_expense.start_date_field.to_i).name%></td>
						<td><%= !/\A\d+\z/.match(income_expense.end_date_field) ? l(('field_'+ income_expense.end_date_field).to_sym) : CustomField.find(income_expense.end_date_field.to_i).name %></td>
						<td class="buttons"><%= delete_link ie_income_expense_path(income_expense) %></td>
					</tr>
					<% end %>
				</tbody>
			</table>
		</div>
	<% end %>
	<p><%= link_to l(:label_income_expenses_new), new_ie_income_expense_path(:type => klass.name, :type_name => l(klass::OptionName)) %></p>

<% end %>